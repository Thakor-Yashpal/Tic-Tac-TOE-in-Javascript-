{"version":3,"sources":["Tic-Tac-Toe.js"],"names":["document","onkeypress","evt","window","event","modal","getElementsByClassName","keyCode","style","display","onclick","target","sumArray","array","sum","i","length","isInArray","element","indexOf","shuffleArray","counter","temp","index","Math","floor","random","intRandom","min","max","rand","moves","winner","x","o","player","computer","whoseTurn","gameOver","score","ties","xText","oText","playerText","computerText","difficulty","myGrid","Grid","cells","Array","prototype","getFreeCellIndices","resultArray","push","getRowValues","console","error","undefined","slice","getRowIndices","row","getColumnValues","column","getColumnIndices","getDiagValues","arg","getDiagIndices","getFirstWithTwoInARow","agent","freeCells","j","rowV","rowI","colV","colI","diagV","diagI","reset","initialize","setTimeout","showOptions","assignRoles","askUser","getElementById","addEventListener","makePlayerX","makePlayerO","removeEventListener","makeComputerMove","cellClicked","id","idName","toString","cell","parseInt","innerHTML","transform","cursor","checkWin","restartGame","ask","response","confirm","classList","remove","myArr","corners","tmpAr","str","add","endGame","col","diagonal","announceWinner","text","closeModal","checked","getOptions","diffs","getElementsByName","value","who"],"mappings":"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","sourcesContent":["document.onkeypress = function(evt) {\r\n    evt = evt || window.event;\r\n    let modal = document.getElementsByClassName(\"modal\")[0];\r\n    if (evt.keyCode === 27) {\r\n        modal.style.display = \"none\";\r\n    }\r\n};\r\n\r\n\r\nwindow.onclick = function(evt) {\r\n    let modal = document.getElementsByClassName(\"modal\")[0];\r\n    if (evt.target === modal) {\r\n        modal.style.display = \"none\";\r\n    }\r\n};\r\n\r\n\r\nfunction sumArray(array) {\r\n    let sum = 0,\r\n        i = 0;\r\n    for (i = 0; i < array.length; i++) {\r\n        sum += array[i];\r\n    }\r\n    return sum;\r\n}\r\n\r\nfunction isInArray(element, array) {\r\n    if (array.indexOf(element) > -1) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction shuffleArray(array) {\r\n    let counter = array.length,\r\n        temp,\r\n        index;\r\n    while (counter > 0) {\r\n        index = Math.floor(Math.random() * counter);\r\n        counter--;\r\n        temp = array[counter];\r\n        array[counter] = array[index];\r\n        array[index] = temp;\r\n    }\r\n    return array;\r\n}\r\n\r\nfunction intRandom(min, max) {\r\n    let rand = min + Math.random() * (max + 1 - min);\r\n    return Math.floor(rand);\r\n}\r\n\r\n// GLOBAL VARIABLES\r\nlet moves = 0,\r\n    winner = 0,\r\n    x = 1,\r\n    o = 3,\r\n    player = x,\r\n    computer = o,\r\n    whoseTurn = x,\r\n    gameOver = false,\r\n    score = {\r\n        ties: 0,\r\n        player: 0,\r\n        computer: 0\r\n    },\r\n    xText = \"<span class=\\\"x\\\">&times;</class>\",\r\n    oText = \"<span class=\\\"o\\\">o</class>\",\r\n    playerText = xText,\r\n    computerText = oText,\r\n    difficulty = 1,\r\n    myGrid = null;\r\n\r\n\r\nfunction Grid() {\r\n    this.cells = new Array(9);\r\n}\r\n\r\n\r\nGrid.prototype.getFreeCellIndices = function() {\r\n    let i = 0,\r\n        resultArray = [];\r\n    for (i = 0; i < this.cells.length; i++) {\r\n        if (this.cells[i] === 0) {\r\n            resultArray.push(i);\r\n        }\r\n    }\r\n\r\n    return resultArray;\r\n};\r\n\r\n\r\nGrid.prototype.getRowValues = function(index) {\r\n    if (index !== 0 && index !== 1 && index !== 2) {\r\n        console.error(\"Wrong arg for getRowValues!\");\r\n        return undefined;\r\n    }\r\n    let i = index * 3;\r\n    return this.cells.slice(i, i + 3);\r\n};\r\n\r\n\r\nGrid.prototype.getRowIndices = function(index) {\r\n    if (index !== 0 && index !== 1 && index !== 2) {\r\n        console.error(\"Wrong arg for getRowIndices!\");\r\n        return undefined;\r\n    }\r\n    let row = [];\r\n    index = index * 3;\r\n    row.push(index);\r\n    row.push(index + 1);\r\n    row.push(index + 2);\r\n    return row;\r\n};\r\n\r\n// get a column (values)\r\nGrid.prototype.getColumnValues = function(index) {\r\n    if (index !== 0 && index !== 1 && index !== 2) {\r\n        console.error(\"Wrong arg for getColumnValues!\");\r\n        return undefined;\r\n    }\r\n    let i, column = [];\r\n    for (i = index; i < this.cells.length; i += 3) {\r\n        column.push(this.cells[i]);\r\n    }\r\n    return column;\r\n};\r\n\r\n// get a column (indices)\r\nGrid.prototype.getColumnIndices = function(index) {\r\n    if (index !== 0 && index !== 1 && index !== 2) {\r\n        console.error(\"Wrong arg for getColumnIndices!\");\r\n        return undefined;\r\n    }\r\n    let i, column = [];\r\n    for (i = index; i < this.cells.length; i += 3) {\r\n        column.push(i);\r\n    }\r\n    return column;\r\n};\r\n\r\n// get diagonal cells\r\n// arg 0: from top-left\r\n// arg 1: from top-right\r\nGrid.prototype.getDiagValues = function(arg) {\r\n    let cells = [];\r\n    if (arg !== 1 && arg !== 0) {\r\n        console.error(\"Wrong arg for getDiagValues!\");\r\n        return undefined;\r\n    } else if (arg === 0) {\r\n        cells.push(this.cells[0]);\r\n        cells.push(this.cells[4]);\r\n        cells.push(this.cells[8]);\r\n    } else {\r\n        cells.push(this.cells[2]);\r\n        cells.push(this.cells[4]);\r\n        cells.push(this.cells[6]);\r\n    }\r\n    return cells;\r\n};\r\n\r\n// get diagonal cells\r\n// arg 0: from top-left\r\n// arg 1: from top-right\r\nGrid.prototype.getDiagIndices = function(arg) {\r\n    if (arg !== 1 && arg !== 0) {\r\n        console.error(\"Wrong arg for getDiagIndices!\");\r\n        return undefined;\r\n    } else if (arg === 0) {\r\n        return [0, 4, 8];\r\n    } else {\r\n        return [2, 4, 6];\r\n    }\r\n};\r\n\r\n\r\nGrid.prototype.getFirstWithTwoInARow = function(agent) {\r\n    if (agent !== computer && agent !== player) {\r\n        console.error(\"Function getFirstWithTwoInARow accepts only player or computer as argument.\");\r\n        return undefined;\r\n    }\r\n    let sum = agent * 2,\r\n        freeCells = shuffleArray(this.getFreeCellIndices());\r\n    for (let i = 0; i < freeCells.length; i++) {\r\n        for (let j = 0; j < 3; j++) {\r\n            let rowV = this.getRowValues(j);\r\n            let rowI = this.getRowIndices(j);\r\n            let colV = this.getColumnValues(j);\r\n            let colI = this.getColumnIndices(j);\r\n            if (sumArray(rowV) == sum && isInArray(freeCells[i], rowI)) {\r\n                return freeCells[i];\r\n            } else if (sumArray(colV) == sum && isInArray(freeCells[i], colI)) {\r\n                return freeCells[i];\r\n            }\r\n        }\r\n        for (j = 0; j < 2; j++) {\r\n            let diagV = this.getDiagValues(j);\r\n            let diagI = this.getDiagIndices(j);\r\n            if (sumArray(diagV) == sum && isInArray(freeCells[i], diagI)) {\r\n                return freeCells[i];\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\nGrid.prototype.reset = function() {\r\n    for (let i = 0; i < this.cells.length; i++) {\r\n        this.cells[i] = 0;\r\n    }\r\n    return true;\r\n};\r\n\r\nfunction initialize() {\r\n    myGrid = new Grid();\r\n    moves = 0;\r\n    winner = 0;\r\n    gameOver = false;\r\n    whoseTurn = player; // default, this may change\r\n    for (let i = 0; i <= myGrid.cells.length - 1; i++) {\r\n        myGrid.cells[i] = 0;\r\n    }\r\n    // setTimeout(assignRoles, 500);\r\n    setTimeout(showOptions, 500);\r\n\r\n}\r\n\r\n// Ask player if they want to play as X or O. X goes first.\r\nfunction assignRoles() {\r\n    askUser(\"Do you want to go first?\");\r\n    document.getElementById(\"yesBtn\").addEventListener(\"click\", makePlayerX);\r\n    document.getElementById(\"noBtn\").addEventListener(\"click\", makePlayerO);\r\n}\r\n\r\nfunction makePlayerX() {\r\n    player = x;\r\n    computer = o;\r\n    whoseTurn = player;\r\n    playerText = xText;\r\n    computerText = oText;\r\n    document.getElementById(\"userFeedback\").style.display = \"none\";\r\n    document.getElementById(\"yesBtn\").removeEventListener(\"click\", makePlayerX);\r\n    document.getElementById(\"noBtn\").removeEventListener(\"click\", makePlayerO);\r\n}\r\n\r\nfunction makePlayerO() {\r\n    player = o;\r\n    computer = x;\r\n    whoseTurn = computer;\r\n    playerText = oText;\r\n    computerText = xText;\r\n    setTimeout(makeComputerMove, 400);\r\n    document.getElementById(\"userFeedback\").style.display = \"none\";\r\n    document.getElementById(\"yesBtn\").removeEventListener(\"click\", makePlayerX);\r\n    document.getElementById(\"noBtn\").removeEventListener(\"click\", makePlayerO);\r\n}\r\n\r\n// executed when player clicks one of the table cells\r\nfunction cellClicked(id) {\r\n\r\n    let idName = id.toString();\r\n    let cell = parseInt(idName[idName.length - 1]);\r\n    if (myGrid.cells[cell] > 0 || whoseTurn !== player || gameOver) {\r\n        // cell is already occupied or something else is wrong\r\n        return false;\r\n    }\r\n    moves += 1;\r\n    document.getElementById(id).innerHTML = playerText;\r\n    // randomize orientation (for looks only)\r\n    let rand = Math.random();\r\n    if (rand < 0.3) {\r\n        document.getElementById(id).style.transform = \"rotate(180deg)\";\r\n    } else if (rand > 0.6) {\r\n        document.getElementById(id).style.transform = \"rotate(90deg)\";\r\n    }\r\n    document.getElementById(id).style.cursor = \"default\";\r\n    myGrid.cells[cell] = player;\r\n    // Test if we have a winner:\r\n    if (moves >= 5) {\r\n        winner = checkWin();\r\n    }\r\n    if (winner === 0) {\r\n        whoseTurn = computer;\r\n        makeComputerMove();\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction restartGame(ask) {\r\n    if (moves > 0) {\r\n        var response = confirm(\"Are you sure you want to start over?\");\r\n        if (response === false) {\r\n            return;\r\n        }\r\n    }\r\n    gameOver = false;\r\n    moves = 0;\r\n    winner = 0;\r\n    whoseTurn = x;\r\n    myGrid.reset();\r\n    for (var i = 0; i <= 8; i++) {\r\n        var id = \"cell\" + i.toString();\r\n        document.getElementById(id).innerHTML = \"\";\r\n        document.getElementById(id).style.cursor = \"pointer\";\r\n        document.getElementById(id).classList.remove(\"win-color\");\r\n    }\r\n    if (ask === true) {\r\n        // setTimeout(assignRoles, 200);\r\n        setTimeout(showOptions, 200);\r\n    } else if (whoseTurn == computer) {\r\n        setTimeout(makeComputerMove, 800);\r\n    }\r\n}\r\n\r\n// The core logic of the game AI:\r\nfunction makeComputerMove() {\r\n    // debugger;\r\n    if (gameOver) {\r\n        return false;\r\n    }\r\n    let cell = -1,\r\n        myArr = [],\r\n        corners = [0, 2, 6, 8];\r\n    if (moves >= 3) {\r\n        cell = myGrid.getFirstWithTwoInARow(computer);\r\n        if (cell === false) {\r\n            cell = myGrid.getFirstWithTwoInARow(player);\r\n        }\r\n        if (cell === false) {\r\n            if (myGrid.cells[4] === 0 && difficulty == 1) {\r\n                cell = 4;\r\n            } else {\r\n                myArr = myGrid.getFreeCellIndices();\r\n                cell = myArr[intRandom(0, myArr.length - 1)];\r\n            }\r\n        }\r\n        // Avoid a catch-22 situation:\r\n        if (moves == 3 && myGrid.cells[4] == computer && player == x && difficulty == 1) {\r\n            if (myGrid.cells[7] == player && (myGrid.cells[0] == player || myGrid.cells[2] == player)) {\r\n                myArr = [6, 8];\r\n                cell = myArr[intRandom(0, 1)];\r\n            } else if (myGrid.cells[5] == player && (myGrid.cells[0] == player || myGrid.cells[6] == player)) {\r\n                myArr = [2, 8];\r\n                cell = myArr[intRandom(0, 1)];\r\n            } else if (myGrid.cells[3] == player && (myGrid.cells[2] == player || myGrid.cells[8] == player)) {\r\n                myArr = [0, 6];\r\n                cell = myArr[intRandom(0, 1)];\r\n            } else if (myGrid.cells[1] == player && (myGrid.cells[6] == player || myGrid.cells[8] == player)) {\r\n                myArr = [0, 2];\r\n                cell = myArr[intRandom(0, 1)];\r\n            }\r\n        } else if (moves == 3 && myGrid.cells[4] == player && player == x && difficulty == 1) {\r\n            if (myGrid.cells[2] == player && myGrid.cells[6] == computer) {\r\n                cell = 8;\r\n            } else if (myGrid.cells[0] == player && myGrid.cells[8] == computer) {\r\n                cell = 6;\r\n            } else if (myGrid.cells[8] == player && myGrid.cells[0] == computer) {\r\n                cell = 2;\r\n            } else if (myGrid.cells[6] == player && myGrid.cells[2] == computer) {\r\n                cell = 0;\r\n            }\r\n        }\r\n    } else if (moves === 1 && myGrid.cells[4] == player && difficulty == 1) {\r\n        // if player is X and played center, play one of the corners\r\n        cell = corners[intRandom(0, 3)];\r\n    } else if (moves === 2 && myGrid.cells[4] == player && computer == x && difficulty == 1) {\r\n        // if player is O and played center, take two opposite corners\r\n        if (myGrid.cells[0] == computer) {\r\n            cell = 8;\r\n        } else if (myGrid.cells[2] == computer) {\r\n            cell = 6;\r\n        } else if (myGrid.cells[6] == computer) {\r\n            cell = 2;\r\n        } else if (myGrid.cells[8] == computer) {\r\n            cell = 0;\r\n        }\r\n    } else if (moves === 0 && intRandom(1, 10) < 8) {\r\n\r\n        cell = corners[intRandom(0, 3)];\r\n    } else {\r\n        // choose the center of the board if possible\r\n        if (myGrid.cells[4] === 0 && difficulty == 1) {\r\n            cell = 4;\r\n        } else {\r\n            myArr = myGrid.getFreeCellIndices();\r\n            cell = myArr[intRandom(0, myArr.length - 1)];\r\n        }\r\n    }\r\n    let id = \"cell\" + cell.toString();\r\n    // console.log(\"computer chooses \" + id);\r\n    document.getElementById(id).innerHTML = computerText;\r\n    document.getElementById(id).style.cursor = \"default\";\r\n\r\n    let rand = Math.random();\r\n    if (rand < 0.3) {\r\n        document.getElementById(id).style.transform = \"rotate(180deg)\";\r\n    } else if (rand > 0.6) {\r\n        document.getElementById(id).style.transform = \"rotate(90deg)\";\r\n    }\r\n    myGrid.cells[cell] = computer;\r\n    moves += 1;\r\n    if (moves >= 5) {\r\n        winner = checkWin();\r\n    }\r\n    if (winner === 0 && !gameOver) {\r\n        whoseTurn = player;\r\n    }\r\n}\r\n\r\n// Check if the game is over and determine winner\r\nfunction checkWin() {\r\n    winner = 0;\r\n\r\n    // rows\r\n    for (let i = 0; i <= 2; i++) {\r\n        let row = myGrid.getRowValues(i);\r\n        if (row[0] > 0 && row[0] == row[1] && row[0] == row[2]) {\r\n            if (row[0] == computer) {\r\n                score.computer++;\r\n                winner = computer;\r\n                // console.log(\"computer wins\");\r\n            } else {\r\n                score.player++;\r\n                winner = player;\r\n                // console.log(\"player wins\");\r\n            }\r\n\r\n            let tmpAr = myGrid.getRowIndices(i);\r\n            for (let j = 0; j < tmpAr.length; j++) {\r\n                let str = \"cell\" + tmpAr[j];\r\n                document.getElementById(str).classList.add(\"win-color\");\r\n            }\r\n            setTimeout(endGame, 1000, winner);\r\n            return winner;\r\n        }\r\n    }\r\n\r\n    // columns\r\n    for (i = 0; i <= 2; i++) {\r\n        let col = myGrid.getColumnValues(i);\r\n        if (col[0] > 0 && col[0] == col[1] && col[0] == col[2]) {\r\n            if (col[0] == computer) {\r\n                score.computer++;\r\n                winner = computer;\r\n            } else {\r\n                score.player++;\r\n                winner = player;\r\n                // console.log(\"player wins\");\r\n            }\r\n            // Give the winning row/column/diagonal a different bg-color\r\n            let tmpAr = myGrid.getColumnIndices(i);\r\n            for (let j = 0; j < tmpAr.length; j++) {\r\n                let str = \"cell\" + tmpAr[j];\r\n                document.getElementById(str).classList.add(\"win-color\");\r\n            }\r\n            setTimeout(endGame, 1000, winner);\r\n            return winner;\r\n        }\r\n    }\r\n\r\n    // diagonals\r\n    for (i = 0; i <= 1; i++) {\r\n        let diagonal = myGrid.getDiagValues(i);\r\n        if (diagonal[0] > 0 && diagonal[0] == diagonal[1] && diagonal[0] == diagonal[2]) {\r\n            if (diagonal[0] == computer) {\r\n                score.computer++;\r\n                winner = computer;\r\n                // console.log(\"computer wins\");\r\n            } else {\r\n                score.player++;\r\n                winner = player;\r\n\r\n            }\r\n\r\n            let tmpAr = myGrid.getDiagIndices(i);\r\n            for (let j = 0; j < tmpAr.length; j++) {\r\n                let str = \"cell\" + tmpAr[j];\r\n                document.getElementById(str).classList.add(\"win-color\");\r\n            }\r\n            setTimeout(endGame, 1000, winner);\r\n            return winner;\r\n        }\r\n    }\r\n\r\n    // If we haven't returned a winner by now, if the board is full, it's a tie\r\n    let myArr = myGrid.getFreeCellIndices();\r\n    if (myArr.length === 0) {\r\n        winner = 10;\r\n        score.ties++;\r\n        endGame(winner);\r\n        return winner;\r\n    }\r\n\r\n    return winner;\r\n}\r\n\r\nfunction announceWinner(text) {\r\n    document.getElementById(\"winText\").innerHTML = text;\r\n    document.getElementById(\"winAnnounce\").style.display = \"block\";\r\n    setTimeout(closeModal, 1400, \"winAnnounce\");\r\n}\r\n\r\nfunction askUser(text) {\r\n    document.getElementById(\"questionText\").innerHTML = text;\r\n    document.getElementById(\"userFeedback\").style.display = \"block\";\r\n}\r\n\r\nfunction showOptions() {\r\n    if (player == o) {\r\n        document.getElementById(\"rx\").checked = false;\r\n        document.getElementById(\"ro\").checked = true;\r\n    } else if (player == x) {\r\n        document.getElementById(\"rx\").checked = true;\r\n        document.getElementById(\"ro\").checked = false;\r\n    }\r\n    if (difficulty === 0) {\r\n        document.getElementById(\"r0\").checked = true;\r\n        document.getElementById(\"r1\").checked = false;\r\n    } else {\r\n        document.getElementById(\"r0\").checked = false;\r\n        document.getElementById(\"r1\").checked = true;\r\n    }\r\n    document.getElementById(\"optionsDlg\").style.display = \"block\";\r\n}\r\n\r\nfunction getOptions() {\r\n    let diffs = document.getElementsByName('difficulty');\r\n    for (let i = 0; i < diffs.length; i++) {\r\n        if (diffs[i].checked) {\r\n            difficulty = parseInt(diffs[i].value);\r\n            break;\r\n            // debugger;\r\n        }\r\n    }\r\n    if (document.getElementById('rx').checked === true) {\r\n        player = x;\r\n        computer = o;\r\n        whoseTurn = player;\r\n        playerText = xText;\r\n        computerText = oText;\r\n    } else {\r\n        player = o;\r\n        computer = x;\r\n        whoseTurn = computer;\r\n        playerText = oText;\r\n        computerText = xText;\r\n        setTimeout(makeComputerMove, 400);\r\n    }\r\n    document.getElementById(\"optionsDlg\").style.display = \"none\";\r\n}\r\n\r\nfunction closeModal(id) {\r\n    document.getElementById(id).style.display = \"none\";\r\n}\r\n\r\nfunction endGame(who) {\r\n    if (who == player) {\r\n        announceWinner(\"Congratulations, you won!\");\r\n    } else if (who == computer) {\r\n        announceWinner(\"Computer wins!\");\r\n    } else {\r\n        announceWinner(\"It's a tie!\");\r\n    }\r\n    gameOver = true;\r\n    whoseTurn = 0;\r\n    moves = 0;\r\n    winner = 0;\r\n    document.getElementById(\"computer_score\").innerHTML = score.computer;\r\n    document.getElementById(\"tie_score\").innerHTML = score.ties;\r\n    document.getElementById(\"player_score\").innerHTML = score.player;\r\n    for (let i = 0; i <= 8; i++) {\r\n        let id = \"cell\" + i.toString();\r\n        document.getElementById(id).style.cursor = \"default\";\r\n    }\r\n    setTimeout(restartGame, 800);\r\n}"],"file":"Tic-Tac-Toe.dev.js"}